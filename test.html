<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<title>ã€‚ï½¥ï¾Ÿï½¥äº’å‹•è¦–é »ã€‚ï½¥ï¾Ÿï½¥ ã€Šæœªæ¥ä¾†é›»ã€‹</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- =================================================
   ğŸ”§ ç¶²é  iconï¼ˆå¯ä»¥ç”¨ png / webp / icoï¼‰
   ğŸ‘‰ æ›æˆä½ è‡ªå·±çš„åœ–
================================================= -->
<link rel="icon" href="Screenshot_2025_1209_164830.png">

<style>
/* =================================================
   åŸºæœ¬ç•«é¢è¨­å®š
================================================= */
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

/* =================================================
   å…±ç”¨é®ç½©ï¼ˆä¸»é¸å–® / æˆå°± / å­˜è®€æª”ï¼‰
================================================= */
.menu {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    z-index: 100;
}

.menu.show {
    display: block;
}

/* =================================================
   ä¸»é¸å–®èƒŒæ™¯
================================================= */
.menu-bg {
    position: absolute;
    inset: 0;

    /* ğŸ”§ ä¸»é¸å–®èƒŒæ™¯åœ–åœ¨é€™è£¡æ› */
    background-image: url("menu_bg.jpg");
    background-size: cover;
    background-position: center;
    opacity: 0.9;
}

/* =================================================
   ä¸»é¸å–®æŒ‰éˆ•ï¼ˆä¸­å¤®ï¼‹å¤§ï¼‰
================================================= */
.menu-buttons {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    gap: 26px;
    z-index: 10;
}

.menu-buttons button {
    width: 320px;
    padding: 22px;
    font-size: 22px;
    border-radius: 40px;
    background: rgba(0,0,0,0.7);
    color: white;
    border: 2px solid white;
    cursor: pointer;
}

/* =================================================
   å½±ç‰‡å®¹å™¨
================================================= */
#video-container {
    position: fixed;
    inset: 0;
    display: none; /* ä¸€é–‹å§‹ä¸é¡¯ç¤º */
}

#main-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: black;
}

/* =================================================
   é¸é …æŒ‰éˆ•
================================================= */
#options {
    position: absolute;
    bottom: 12%;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    gap: 20px;
    z-index: 10;
}

#options button {
    padding: 14px 32px;
    border-radius: 30px;
    background: rgba(0,0,0,0.65);
    color: white;
    border: 1px solid white;
    cursor: pointer;
}

/* =================================================
   å´é‚ŠåŠŸèƒ½éµ
================================================= */
#menu-btns {
    position: fixed;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 50;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#menu-btns button {
    padding: 10px 18px;
    background: rgba(0,0,0,0.6);
    color: white;
    border: 1px solid white;
    border-radius: 20px;
    cursor: pointer;
}

/* =================================================
   æˆå°± / å­˜è®€æª” ç›’å­
================================================= */
.menu-box {
    width: 80%;
    max-width: 640px;
    margin: 8% auto;
    background: #111;
    color: white;
    padding: 24px;
    border-radius: 14px;
    position: relative;
}

.close {
    position: absolute;
    top: 10px;
    right: 16px;
    cursor: pointer;
}

/* =================================================
   æˆå°±åˆ—è¡¨
================================================= */
#achievement-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
}

.achievement {
    border: 1px solid #444;
    padding: 14px;
    text-align: center;
    background: #000;
}
</style>
</head>

<body>

<!-- ================= ä¸»é¸å–® ================= -->
<div id="main-menu" class="menu show">
    <div class="menu-bg"></div>

    <div class="menu-buttons">
        <button onclick="startGame()">â–¶ ä¸»ç·šé–‹å§‹</button>
        <button onclick="startExtra()">â˜† ç•ªå¤–</button>
        <button onclick="openAchievements()">ğŸ† çµå±€è’é›†</button>
    </div>
</div>

<!-- ================= æˆå°±ä»‹é¢ ================= -->
<div id="achievement-menu" class="menu">
    <div class="menu-box">
        <span class="close" onclick="closeAchievements()">âœ•</span>
        <h2>çµå±€è’é›†</h2>
        <div id="achievement-list"></div>
    </div>
</div>

<!-- ================= éŠæˆ²æœ¬é«” ================= -->
<div id="video-container">

    <video id="main-video" autoplay playsinline></video>

    <div id="options"></div>

    <div id="menu-btns">
        <button onclick="openSaveMenu()">å­˜æª”</button>
        <button onclick="openLoadMenu()">è®€æª”</button>
    </div>
</div>

<script>
/* =================================================
   çµå±€è³‡æ–™ï¼ˆâš ï¸ ä¸€å®šè¦åœ¨ story å¤–é¢ï¼‰
================================================= */
const endings = {
    ignore: "ç„¡æ³•åœç•™çš„äººé–“",
    only_you: "è½å–®",
    the_blood: "å†ä¹Ÿé€ƒé›¢ä¸äº†çš„æƒ¡å¤¢"
};

/* =================================================
   åŠ‡æƒ…è³‡æ–™ï¼ˆä½ çš„åŸæœ¬åŠ‡æƒ…ï¼Œå·²å…¨éƒ¨è£œå›ï¼‰
================================================= */
const story = {

    ignore: {
        title: "ç„¡æ³•åœç•™çš„äººé–“",
        video: "endå–§å›‚.mp4",
        choices: [],
        isEnd: true
    },

    only_you: {
        title: "è½å–®",
        video: "endè½å–®.mp4",
        choices: [],
        isEnd: true
    },

    the_blood: {
        title: "å†ä¹Ÿé€ƒé›¢ä¸äº†çš„æƒ¡å¤¢",
        video: "endè¡€è‰²çš„å‘»åŸ.mp4",
        choices: [],
        isEnd: true
    },

    start: {
        title: "é–‹ç«¯",
        video: "é–‹ç«¯.mp4",
        choices: [
            { text: "ä¸Šå‰è©¢å•", next: "reply" },
            { text: "ä¸ç®¡äº†ï¼Œé‚„æ˜¯å›å®¶å§â€¦â€¦", next: "ignore" }
        ]
    },

    reply: {
        title: "åˆæ¬¡è¦‹é¢",
        video: "æ­è©±.mp4",
        choices: [
            { text: "å¥½çš„", next: "yes" },
            { text: "ä¸å»", next: "no" }
        ]
    },

    no: {
        title: "è‰¾çˆ¾çš„é‚€ç´„",
        video: "è›‹ç³•åº—.mp4",
        choices: [
            { text: "ç­”æ‡‰ä»–", next: "go" },
            { text: "æ‹’çµ•ä»–", next: "dont_go" }
        ]
    },

    dont_go: {
        title: "æ‹’çµ•",
        video: "æ‹’çµ•.mp4",
        choices: [],
        nextScene: "only_you"
    },

    go: {
        title: "æœŸå¾…çš„æ˜æ—¥",
        video: "ä¸€èµ·å».mp4",
        choices: [],
        nextScene: "make_cake"
    },

    make_cake: {
        title: "ç”œé»æ™‚å…‰",
        video: "åšè›‹ç³•.mp4",
        choices: [],
        nextScene: "eat_cake"
    },

    eat_cake: {
        title: "å¥¶æ²¹èˆ‡å¿ƒè·³",
        video: "åƒè›‹ç³•.mp4",
        choices: [
            { text: "è‡ªå·±æ­åœ°éµ", next: "the_blood" },
            { text: "è®“è‰¾çˆ¾é€ä½ ", next: "talking" }
        ]
    },

    talking: {
        title: "ä½ çš„ä¸»å‹•",
        video: "ä¸€èµ·å›å®¶.mp4",
        choices: [
            { text: "æåŠç«¥å¹´", next: "mother" },
            { text: "æåŠå°è²“", next: "cat" },
            { text: "æ²‰é»˜", next: "quiet" }
        ]
    },

    mother: {
        title: "å°ç«¥å¹´çš„è†è½",
        video: "ç«¥å¹´çš„è©•åƒ¹.mp4",
        choices: [
            { text: "æ¯è¦ªéƒ½æ˜¯ç‚ºäº†ä½ å¥½", next: "only_you" },
            { text: "ä»¥å¾Œéƒ½æœ‰æˆ‘åœ¨", next: "only_you" }
        ]
    },

    yes: {
        title: "ï¼ˆé ç•™ï¼‰",
        video: "æ­è©±.mp4",
        choices: [],
        isEnd: true
    }
};

/* =================================================
   ç³»çµ±ç‹€æ…‹
================================================= */
const video = document.getElementById("main-video");
const options = document.getElementById("options");
let currentScene = "start";
let wasPlaying = false;

/* =================================================
   æ’­æ”¾å ´æ™¯
================================================= */
function loadScene(key) {
    currentScene = key;
    const scene = story[key];

    video.pause();
    video.src = scene.video;
    video.load();
    video.currentTime = 0;
    video.play();

    options.innerHTML = "";
    options.style.display = "none";
    document.getElementById("restart").style.display = "none";

    video.onended = () => {

        if (scene.isEnd) {
            unlockEnding(key);
            document.getElementById("restart").style.display = "block";
            return;
        }

        if (scene.choices.length === 0 && scene.nextScene) {
            loadScene(scene.nextScene);
            return;
        }

        scene.choices.forEach(c => {
            const btn = document.createElement("button");
            btn.textContent = c.text;
            btn.onclick = () => loadScene(c.next);
            options.appendChild(btn);
        });

        options.style.display = "flex";
    };
}

/* =================================================
   çµå±€è§£é–ï¼ˆæˆå°±ï¼‰
================================================= */
function unlockEnding(key) {
    if (!endings[key]) return;

    let unlocked = JSON.parse(localStorage.getItem("endings")) || [];
    if (!unlocked.includes(key)) {
        unlocked.push(key);
        localStorage.setItem("endings", JSON.stringify(unlocked));
    }
}

/* =================================================
   å­˜æª” / è®€æª”ï¼ˆä½ åŸæœ¬çš„ï¼Œæ­£å¸¸å¯ç”¨ï¼‰
================================================= */
function openSaveMenu() {
    wasPlaying = !video.paused;
    video.pause();
    generateSlots("save");
    document.getElementById("save-menu").style.display = "block";
}

function openLoadMenu() {
    wasPlaying = !video.paused;
    video.pause();
    generateSlots("load");
    document.getElementById("load-menu").style.display = "block";
}

function closeMenus() {
    document.getElementById("save-menu").style.display = "none";
    document.getElementById("load-menu").style.display = "none";
    if (wasPlaying) video.play();
}

function generateSlots(type) {
    const container = document.getElementById(type + "-slots");
    container.innerHTML = "";

    for (let i = 1; i <= 9; i++) {
        const data = localStorage.getItem("save_" + i);
        const slot = document.createElement("div");
        slot.className = "slot";

        const img = document.createElement("img");
        const p = document.createElement("p");

        if (data) {
            const save = JSON.parse(data);
            img.src = save.thumbnail;
            p.innerText = save.title;
        } else {
            p.innerText = "ç©ºç™½å­˜æª”";
        }

        slot.appendChild(img);
        slot.appendChild(p);
        slot.onclick = () => type === "save" ? saveToSlot(i) : loadFromSlot(i);

        container.appendChild(slot);
    }
}

function captureThumbnail() {
    if (video.videoWidth === 0) return "";
    const canvas = document.createElement("canvas");
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    canvas.getContext("2d").drawImage(video, 0, 0);
    return canvas.toDataURL("image/png");
}

function saveToSlot(i) {
    const saveData = {
        scene: currentScene,
        title: story[currentScene].title,
        time: video.currentTime || 0,
        thumbnail: captureThumbnail()
    };
    localStorage.setItem("save_" + i, JSON.stringify(saveData));
    closeMenus();
}

function loadFromSlot(i) {
    const data = localStorage.getItem("save_" + i);
    if (!data) return;
    const save = JSON.parse(data);
    closeMenus();
    loadScene(save.scene);
    video.onloadedmetadata = () => {
        video.currentTime = save.time;
        video.play();
    };
}

function restartGame() {
    loadScene("start");
}

loadScene("start");
</script>


</body>
</html>
