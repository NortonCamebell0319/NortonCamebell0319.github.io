<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<title>《未接來電》</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

.menu {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    z-index: 100;
}
.menu.show { display: block; }

.menu-buttons {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    gap: 24px;
}
.menu-buttons button {
    width: 300px;
    padding: 20px;
    font-size: 22px;
}

#video-container {
    position: fixed;
    inset: 0;
    display: none;
}
#main-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

#options {
    position: absolute;
    bottom: 12%;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    gap: 20px;
}
</style>
</head>

<body>

<!-- 主選單 -->
<div id="main-menu" class="menu show">
    <div class="menu-buttons">
        <button onclick="startGame()">▶ 主線開始</button>
    </div>
</div>

<!-- 遊戲 -->
<div id="video-container">
    <video id="main-video" playsinline></video>
    <div id="options"></div>

    <div id="restart" style="display:none; position:absolute; bottom:12%; left:50%; transform:translateX(-50%);">
        <button onclick="restartGame()">回到開端</button>
    </div>
</div>

<script>
const story = {
    start: {
        video: "開端.mp4",
        choices: [
            { text: "上前詢問", next: "end" }
        ]
    },
    end: {
        video: "end落單.mp4",
        choices: [],
        isEnd: true
    }
};

const video = document.getElementById("main-video");
const options = document.getElementById("options");
const restartBtn = document.getElementById("restart");

let currentScene = null;

function startGame() {
    document.getElementById("main-menu").classList.remove("show");
    document.getElementById("video-container").style.display = "block";
    loadScene("start");
}

function loadScene(key) {
    currentScene = key;
    const scene = story[key];

    video.src = scene.video;
    video.load();
    video.play().catch(()=>{});

    options.innerHTML = "";
    options.style.display = "none";
    restartBtn.style.display = "none";

    video.onended = () => {
        if (scene.isEnd) {
            restartBtn.style.display = "block";
            return;
        }

        scene.choices.forEach(c => {
            const btn = document.createElement("button");
            btn.textContent = c.text;
            btn.onclick = () => loadScene(c.next);
            options.appendChild(btn);
        });
        options.style.display = "flex";
    };
}

function restartGame() {
    loadScene("start");
}
</script>

</body>
</html>
